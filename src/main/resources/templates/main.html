<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>ë¬´ì„±ì˜ ì—¬í–‰</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
/* --- ê¸°ë³¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ --- */
body {
	font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
	background-color: #f0f2f5;
	margin: 0;
	padding: 0;
}

/* --- í—¤ë” (GNB) ìŠ¤íƒ€ì¼ --- */
.moana_gnb {
	background-color: #5ac4c9;
	color: #fff;
	padding: 10px 0;
	width: 100%;
}

.gnb_container {
	max-width: 1200px;
	margin: 0 auto;
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0 20px;
	box-sizing: border-box;
}

.box__inner {
	display: flex;
	align-items: center;
	gap: 20px;
}

.moana_gnb h1 {
	margin: 0;
}

.box__inner h1 a {
	color: #fff;
	text-decoration: none;
	font-size: 22px;
	font-weight: bold;
}

/* ìƒë‹¨ ë©”ë‰´ (í•­ê³µ, í˜¸í…” ë“±) ìŠ¤íƒ€ì¼ */
.list__tab {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	gap: 20px;
}

.list__tab .list-item a {
	color: #fff;
	text-decoration: none;
	font-weight: bold;
	padding: 5px 0;
	position: relative;
	transition: color 0.3s ease;
}

.list__tab .list-item a:hover, .list__tab .list-item a.link__tab--active
	{
	color: #eee;
}

.list__tab .list-item a.link__tab--active::after {
	content: '';
	position: absolute;
	left: 0;
	bottom: -5px;
	width: 100%;
	height: 2px;
	background-color: #fff;
}

.link-container {
	display: flex;
	align-items: center;
	gap: 10px;
}

.link__booking-history {
	border: 1px solid #fff;
	color: #fff;
	padding: 8px 15px;
	border-radius: 20px;
	text-decoration: none;
	font-size: 14px;
	white-space: nowrap;
}

/* --- ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ --- */
main {
	width: 100%;
}

/* --- Hero ì„¹ì…˜ --- */
.hero-section {
	position: relative;
	width: 100%;
	margin-bottom: 100px;
}

.bg-image-full {
	background-image: url(/image/ÑĞ°Ğ¼Ğ¾Ğ»Ñ‘Ñ‚Ğ¸Ğº.png);
	background-size: 100%;
	background-position: center;
	height: 30vh;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	background-color: #ddd;
}

/* --- ê²€ìƒ‰ ìœ„ì ¯ --- */
.search-widget-container {
	position: absolute;
	bottom: -80px;
	left: 50%;
	transform: translateX(-50%);
	z-index: 10;
	background-color: white;
	border-radius: 16px;
	box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
	padding: 12px 24px 20px 24px;
	width: 100%;
	max-width: 950px;
	box-sizing: border-box;
}

.top-section {
	display: flex;
	justify-content: space-between;
	align-items: center;
	border-bottom: 1px solid #eee;
	padding-bottom: 8px;
	margin-bottom: 16px;
}

.tabs .tab-label {
	background: none;
	border: none;
	font-size: 16px;
	padding: 8px 12px;
	margin-right: 12px;
	cursor: pointer;
	color: #888;
	display: inline-block;
}

.tabs input[type="radio"]:checked+.tab-label {
	color: #3d5aee;
	font-weight: bold;
	box-shadow: inset 0 -2px 0 #3d5aee;
}

.direct-flight-option {
	display: flex;
	align-items: center;
	font-size: 14px;
	color: #555;
}

.direct-flight-option input {
	margin-right: 6px;
}

.search-fields {
	display: flex;
	align-items: center;
	gap: 16px;
}

.search-fields button {
	background: none;
	border: none;
	text-align: left;
	padding: 10px 4px;
	font-size: 18px;
	font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
	cursor: pointer;
	flex-grow: 1;
}

.field-location {
	color: #333;
	font-weight: bold;
	min-width: 120px;
}

.field-placeholder {
	color: #999;
	white-space: nowrap;
}

.swap-button {
	border: 1px solid #ddd;
	border-radius: 50%;
	width: 32px;
	height: 32px;
	min-width: 32px;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 16px;
	color: #555;
	flex-grow: 0;
}

.submit-button {
	color: blue;
	font-weight: bold;
	border-radius: 8px;
	padding: 14px 24px;
	flex-grow: 0;
}

/* --- ëª¨ë‹¬ ê³µí†µ ìŠ¤íƒ€ì¼ --- */
.modal-overlay {
	display: none;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0, 0, 0, 0.5);
	justify-content: center;
	align-items: center;
	z-index: 1000;
}

.modal-content {
	background-color: white;
	padding: 24px;
	border-radius: 16px;
	box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
	width: 400px;
	max-height: 80vh;
	overflow-y: auto;
	position: relative;
}

.modal-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
}

.modal-header h2 {
	margin: 0;
	font-size: 20px;
}

.close-button {
	background: none;
	border: none;
	font-size: 24px;
	cursor: pointer;
}

/* --- ì—¬í–‰ì§€ ì¶”ì²œ ëŒ€í˜• ëª¨ë‹¬ ìŠ¤íƒ€ì¼ --- */
.modal-large {
	width: 800px;
	max-width: 95%;
	max-height: 90vh;
	padding: 0;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

.modal-large .modal-header {
	padding: 20px 24px;
	border-bottom: 1px solid #eee;
	background-color: #fff;
	z-index: 10;
	margin-bottom: 0;
}

.modal-large .modal-body {
	padding: 24px;
	overflow-y: auto;
	background-color: #f9f9f9;
}

.dest-desc {
	font-size: 16px;
	color: #555;
	margin-bottom: 30px;
	line-height: 1.6;
}

.rec-title {
	font-size: 18px;
	font-weight: bold;
	color: #333;
	margin-bottom: 15px;
}

/* ì¶”ì²œ ì•¡í‹°ë¹„í‹° ê·¸ë¦¬ë“œ */
.activity-grid {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: 20px;
}

.activity-item {
	background: white;
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
	transition: transform 0.2s;
}

.activity-item:hover {
	transform: translateY(-3px);
}

.activity-img {
	width: 100%;
	height: 160px;
	object-fit: cover;
}

.activity-info {
	padding: 15px;
}

.activity-info h5 {
	margin: 0 0 5px 0;
	font-size: 16px;
	font-weight: bold;
	color: #333;
}

.activity-info p {
	margin: 0;
	font-size: 13px;
	color: #666;
	line-height: 1.4;
}

@media ( max-width : 600px) {
	.activity-grid {
		grid-template-columns: 1fr;
	}
}

/* --- ê²€ìƒ‰ ëª¨ë‹¬ ë‚´ë¶€ --- */
.modal-search-input {
	width: 100%;
	padding: 12px;
	border: 1px solid #ddd;
	border-radius: 8px;
	font-size: 16px;
	box-sizing: border-box;
	margin-bottom: 24px;
}

.popular-searches h3 {
	font-size: 16px;
	color: #555;
	margin-top: 20px;
	margin-bottom: 12px;
}

.tags-container {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
}

.tag {
	background-color: #f0f0f0;
	color: #333;
	padding: 8px 16px;
	border-radius: 20px;
	font-size: 14px;
	cursor: pointer;
	transition: background-color 0.2s;
}

.tag:hover {
	background-color: #e0e0e0;
}

.search-result-item {
	padding: 10px 5px;
	cursor: pointer;
	border-bottom: 1px solid #f0f0f0;
}

.search-result-item:hover {
	background-color: #f5f5f5;
}

.location-main {
	font-weight: bold;
	font-size: 16px;
}

.location-sub {
	font-size: 14px;
	color: #888;
}

.no-results {
	padding: 20px;
	text-align: center;
	color: #999;
}

/* flatpickr ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
.flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange
	{
	background: #3d5aee;
	border-color: #3d5aee;
}

.flatpickr-day.inRange {
	background: #e0e7ff;
	box-shadow: -5px 0 0 #e0e7ff, 5px 0 0 #e0e7ff;
	border-color: transparent;
}

.passenger-section, .seat-class-section {
	margin-bottom: 24px;
}

.passenger-section h4, .seat-class-section h4 {
	margin-top: 0;
	margin-bottom: 12px;
	font-size: 16px;
	color: #333;
}

.passenger-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 16px;
}

.passenger-label small {
	color: #888;
	font-size: 12px;
}

.passenger-controls {
	display: flex;
	align-items: center;
	gap: 15px;
}

.passenger-controls .count {
	font-size: 18px;
	width: 25px;
	text-align: center;
}

.control-btn {
	width: 32px;
	height: 32px;
	border-radius: 50%;
	border: 1px solid #ddd;
	background-color: white;
	font-size: 20px;
	cursor: pointer;
	color: #3d5aee;
}

.control-btn:disabled {
	color: #ccc;
	cursor: not-allowed;
}

.seat-class-options {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 10px;
}

.seat-class-options label {
	display: flex;
	align-items: center;
	gap: 5px;
	font-size: 14px;
}

.confirm-btn {
	width: 100%;
	padding: 14px;
	background-color: #3d5aee;
	color: white;
	border: none;
	border-radius: 8px;
	font-size: 16px;
	font-weight: bold;
	cursor: pointer;
}

#alertModal .modal-content {
	width: 320px;
	padding: 30px;
	text-align: center;
}

#alertModal p {
	font-size: 16px;
	line-height: 1.6;
	margin: 0 0 20px 0;
	font-weight: bold;
	color: #333;
}

#alertModal button {
	width: 100%;
	padding: 12px;
	background-color: #3d5aee;
	color: white;
	border: none;
	border-radius: 8px;
	font-size: 16px;
	font-weight: bold;
	cursor: pointer;
}

#loadingModal {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: rgba(0, 0, 0, 0.6);
	z-index: 2000;
	display: none;
	justify-content: center;
	align-items: center;
	flex-direction: column;
	color: white;
}

.spinner {
	width: 50px;
	height: 50px;
	border: 5px solid #f3f3f3;
	border-top: 5px solid #5ac4c9;
	border-radius: 50%;
	animation: spin 1s linear infinite;
	margin-bottom: 20px;
}

#loadingModal p {
	font-size: 18px;
	font-weight: bold;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.popular-destinations-section {
	padding: 40px 0;
	margin-top: 100px;
}

.content-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 0 20px;
	box-sizing: border-box;
}

.popular-destinations-section h2 {
	font-size: 24px;
	font-weight: bold;
	color: #333;
	margin-top: 0;
	margin-bottom: 8px;
}

.popular-destinations-section p {
	font-size: 16px;
	color: #777;
	margin-bottom: 30px;
}

.popular-destinations-section h3 {
	font-size: 20px;
	font-weight: bold;
	color: #333;
	margin-top: 40px;
	margin-bottom: 20px;
	padding-bottom: 10px;
	border-bottom: 1px solid #eee;
}

.destination-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 24px;
}

.destination-card {
	background-color: #fff;
	border-radius: 12px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
	overflow: hidden;
	transition: all 0.3s ease;
	cursor: pointer;
}

.destination-card:hover {
	transform: translateY(-5px);
	box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

.destination-card img {
	width: 100%;
	height: 200px;
	object-fit: cover;
}

.card-details {
	padding: 16px;
}

.card-details h4 {
	font-size: 18px;
	font-weight: bold;
	color: #222;
	margin: 0 0 4px 0;
}

.card-details small {
	font-size: 14px;
	color: #888;
}

.activities-preview {
	margin-top: 12px;
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.activity-tag {
	background-color: #f0f2f5;
	color: #555;
	font-size: 12px;
	padding: 4px 8px;
	border-radius: 20px;
	white-space: nowrap;
}

@media ( max-width : 992px) {
	.destination-grid {
		grid-template-columns: repeat(2, 1fr);
	}
}

@media ( max-width : 576px) {
	.destination-grid {
		grid-template-columns: 1fr;
	}
	.popular-destinations-section h2 {
		font-size: 20px;
	}
	.popular-destinations-section p {
		font-size: 14px;
	}
	.popular-destinations-section h3 {
		font-size: 18px;
	}
}

.trend-section {
    padding: 20px 0 40px 0;
    background-color: #fff;
    margin-bottom: 20px;
    border-bottom: 1px solid #eee;
}
.trend-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr); /* í•œ ì¤„ì— 6ê°œ */
    gap: 15px;
    margin-top: 20px;
}
.trend-card {
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 20px 15px;
    text-align: center;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.trend-card:hover {
    transform: translateY(-5px);
    border-color: #5ac4c9;
    box-shadow: 0 5px 15px rgba(90, 196, 201, 0.2);
}
.trend-rank {
    position: absolute;
    top: -10px;
    left: -5px;
    background-color: #ff7675;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
/* 1,2,3ë“±ì€ ìƒ‰ìƒ ë‹¤ë¥´ê²Œ ê°•ì¡° */
.trend-card:nth-child(1) .trend-rank { background-color: #d63031; transform: scale(1.1); }
.trend-card:nth-child(2) .trend-rank { background-color: #e17055; }
.trend-card:nth-child(3) .trend-rank { background-color: #fdcb6e; color: #333; }

.trend-city {
    font-size: 18px;
    font-weight: bold;
    color: #333;
    margin: 10px 0 5px 0;
    display: block;
}
.trend-code {
    font-size: 13px;
    color: #999;
    background-color: #f5f5f5;
    padding: 2px 6px;
    border-radius: 4px;
}
.trend-count {
    display: block;
    margin-top: 12px;
    font-size: 13px;
    color: #5ac4c9;
    font-weight: bold;
}

@media (max-width: 992px) {
    .trend-grid { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 576px) {
    .trend-grid { grid-template-columns: repeat(2, 1fr); }
}

.trend-container {
    margin-bottom: 50px;
    position: relative;
}

/* ë¼ë””ì˜¤ ë²„íŠ¼ ìˆ¨ê¸°ê¸° */
.trend-tab-input {
    display: none;
}

/* íƒ­ ë©”ë‰´ ì˜ì—­ */
.trend-tabs {
    display: flex;
    gap: 20px;
    margin-top: 30px;
    margin-bottom: 20px;
    border-bottom: 2px solid #eee;
}

.trend-tab-label {
    font-size: 20px;
    font-weight: bold;
    color: #888;
    cursor: pointer;
    padding-bottom: 10px;
    position: relative;
    transition: all 0.3s;
}

/* ì„ íƒëœ íƒ­ ìŠ¤íƒ€ì¼ (ë¼ë””ì˜¤ ë²„íŠ¼ ì²´í¬ ì‹œ) */
#tab-domestic:checked ~ .trend-tabs label[for="tab-domestic"],
#tab-overseas:checked ~ .trend-tabs label[for="tab-overseas"] {
    color: #333;
    border-bottom: 3px solid #ff7675; /* í¬ì¸íŠ¸ ì»¬ëŸ¬ */
    margin-bottom: -2px;
}

/* ê·¸ë¦¬ë“œ ê¸°ë³¸ ìˆ¨ê¹€ */
.trend-content {
    display: none; 
    grid-template-columns: repeat(6, 1fr);
    gap: 15px;
    animation: fadeIn 0.5s;
}

/* ì„ íƒëœ íƒ­ì˜ ê·¸ë¦¬ë“œë§Œ ë³´ì´ê¸° */
#tab-domestic:checked ~ #content-domestic,
#tab-overseas:checked ~ #content-overseas {
    display: grid;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ë°˜ì‘í˜• (ê¸°ì¡´ trend-grid ë¯¸ë””ì–´ ì¿¼ë¦¬ì™€ ë™ì¼) */
@media (max-width: 992px) {
    .trend-content { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 576px) {
    .trend-content { grid-template-columns: repeat(2, 1fr); }
}
</style>
</head>
<body>

	<header class="moana_gnb" role="banner">
		<div class="gnb_container">
			<div class="box__inner">
				<h1>
					<a href="/">ë¬´ì„±ì˜ ì—¬í–‰</a>
				</h1>
			</div>
			<ul class="list__tab">
				<li class="list-item"><a class="link__tab link__tab--active"
					href="/">í•­ê³µ</a></li>
				<li class="list-item"><a class="link__tab" href="/chat">ì¶”ì²œì±—</a>
				</li>
			</ul>
			<div class="link-container">
				<a href="/revList" class="link__booking-history sp_sd--after"
					th:if="${session.loginUser != null}">ë‚˜ì˜ ì˜ˆì•½ë‚´ì—­</a> <a
					th:if="${session.loginUser == null}"
					class="link__booking-history sp_sd--after" href="member/login">ë¡œê·¸ì¸</a>
				<a th:if="${session.loginUser != null}"
					th:text="${session.loginUser.UserName}"
					class="link__booking-history sp_sd--after">í—ˆì„±ë¬´</a> <a
					th:if="${session.loginUser != null}"
					class="link__booking-history sp_sd--after" href="member/logout">ë¡œê·¸ì•„ì›ƒ</a>
			</div>
		</div>
	</header>

	<main>
		<section class="hero-section">
			<div class="bg-image-full"></div>
			<form class="search-widget-container" action="/air/searchAirport"
				method="post">
				<div class="top-section">
					<div class="tabs">
						<input type="radio" name="tripType" value="round-trip"
							id="round-trip" checked style="display: none;"> <label
							for="round-trip" class="tab-label">ì™•ë³µ</label> <input type="radio"
							name="tripType" value="one-way" id="one-way"
							style="display: none;"> <label for="one-way"
							class="tab-label">í¸ë„</label>
					</div>
					<div class="direct-flight-option">
						<input type="hidden" name="directFlight" id="directFlightInput"
							value="false"> <input type="checkbox"
							id="direct-flight-checkbox"> <label
							for="direct-flight-checkbox">ì§í•­</label>
					</div>
				</div>
				<div class="search-fields">
					<button type="button" id="departureBtn" class="field-location">ì„œìš¸
						SEL</button>
					<button type="button" class="swap-button">â†”</button>
					<button type="button" id="arrivalBtn" class="field-placeholder">ë„ì°©ì§€
						IN</button>

					<button type="button" id="dateRangeBtn" class="field-placeholder">ì–¸ì œ
						ë– ë‚˜ì‹œë‚˜ìš”?</button>
					<input type="hidden" name="departureDate" id="departureDateInput">
					<input type="hidden" name="returnDate" id="returnDateInput">

					<button type="button" id="passengerBtn" class="field-placeholder">ğŸ‘¤
						íƒ‘ìŠ¹ê° 1ëª…, ì¼ë°˜ì„</button>

					<input type="hidden" name="departureCode" id="departureCode"
						value="SEL"> <input type="hidden"
						name="departureKoLocation" id="departureKoLocation" value="ì„œìš¸">
					<input type="hidden" name="arrivalCode" id="arrivalCode" value="">
					<input type="hidden" name="arrivalKoLocation"
						id="arrivalKoLocation" value=""> <input type="hidden"
						name="adults" id="adultsInput" value="1"> <input
						type="hidden" name="children" id="childrenInput" value="0">
					<input type="hidden" name="infants" id="infantsInput" value="0">
					<input type="hidden" name="travelClass" id="travelClassInput"
						value="ECONOMY">
					<button type="submit" class="submit-button">ìµœì €ê°€ë¡œ ê²€ìƒ‰</button>
				</div>
			</form>
		</section>

		<section class="popular-destinations-section">
			<div class="content-container">
				<h2>ëŒ€í•œë¯¼êµ­ ì¶œë°œ ì¸ê¸° í•­ê³µê¶Œ</h2>

        <div class="trend-container">
            <input type="radio" id="tab-domestic" name="trendTabs" class="trend-tab-input" checked>
            <input type="radio" id="tab-overseas" name="trendTabs" class="trend-tab-input">

            <div class="trend-tabs">
                <label for="tab-domestic" class="trend-tab-label">ğŸ”¥ êµ­ë‚´ ê¸‰ìƒìŠ¹</label>
                <label for="tab-overseas" class="trend-tab-label">âœˆï¸ í•´ì™¸ ê¸‰ìƒìŠ¹</label>
            </div>

            <div id="content-domestic" class="trend-content">
                <div class="trend-card" th:each="item, stat : ${domesticTrend}">
                    <div class="trend-rank" th:text="${stat.count}">1</div>
                    <span class="trend-city" th:text="${item.cityName}">ì œì£¼</span>
                    <span class="trend-code" th:text="${item.iataCode}">CJU</span>
                    <span class="trend-count" th:text="|âš¡ ${item.searchCount}íšŒ ê²€ìƒ‰|">45íšŒ</span>
                </div>
                 <div th:if="${domesticTrend.empty}" style="grid-column: 1/-1; text-align: center; padding: 20px; color: #999;">
                    ì•„ì§ ì§‘ê³„ëœ êµ­ë‚´ ê²€ìƒ‰ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>

            <div id="content-overseas" class="trend-content">
                <div class="trend-card" th:each="item, stat : ${overseasTrend}">
                    <div class="trend-rank" th:text="${stat.count}">1</div>
                    <span class="trend-city" th:text="${item.cityName}">ì˜¤ì‚¬ì¹´</span>
                    <span class="trend-code" th:text="${item.iataCode}">KIX</span>
                    <span class="trend-count" th:text="|âš¡ ${item.searchCount}íšŒ ê²€ìƒ‰|">15íšŒ</span>
                </div>
                 <div th:if="${overseasTrend.empty}" style="grid-column: 1/-1; text-align: center; padding: 20px; color: #999;">
                    ì•„ì§ ì§‘ê³„ëœ í•´ì™¸ ê²€ìƒ‰ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>
				<h3>êµ­ë‚´ ì¸ê¸° ì—¬í–‰ì§€</h3>

				<div class="destination-grid">
					<div class="destination-card" th:each="dest : ${domesticList}"
						th:data-city="${dest.cityName}">
						<img th:src="${dest.mainImageUrl}" th:alt="${dest.cityName}">
						<div class="card-details">
							<h4 th:text="${dest.cityName}">ë„ì‹œì´ë¦„</h4>
							<small th:text="${dest.country}">êµ­ê°€</small>
							<div class="activities-preview">
								<span class="activity-tag"
									th:each="act, iStat : ${dest.activities}"
									th:if="${iStat.index < 2}" th:text="${act.title}">ì•¡í‹°ë¹„í‹°</span>
							</div>
						</div>
					</div>
				</div>

				<h3>í•´ì™¸ ì¸ê¸° ì—¬í–‰ì§€</h3>

				<div class="destination-grid">
					<div class="destination-card" th:each="dest : ${overseasList}"
						th:data-city="${dest.cityName}">
						<img th:src="${dest.mainImageUrl}" th:alt="${dest.cityName}">
						<div class="card-details">
							<h4 th:text="${dest.cityName}">ë„ì‹œì´ë¦„</h4>
							<small th:text="${dest.country}">êµ­ê°€</small>
							<div class="activities-preview">
								<span class="activity-tag"
									th:each="act, iStat : ${dest.activities}"
									th:if="${iStat.index < 2}" th:text="${act.title}">ì•¡í‹°ë¹„í‹°</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<div id="locationModal" class="modal-overlay">
		<div class="modal-content">
			<div class="modal-header">
				<h2 id="modalTitle">ì¶œë°œì§€ ì„ íƒ</h2>
				<button id="closeModalBtn" class="close-button">&times;</button>
			</div>
			<input type="text" id="searchAir" class="modal-search-input"
				placeholder="êµ­ê°€, ë„ì‹œ ë˜ëŠ” ê³µí•­ìœ¼ë¡œ ì°¾ì•„ë³´ì„¸ìš”">
			<div class="popular-searches">
				<h3>êµ­ë‚´ ì¸ê¸° ê²€ìƒ‰</h3>
				<div class="tags-container">
					<span class="tag" data-iata="ICN" data-kolocation="ì„œìš¸/ì¸ì²œ">ì„œìš¸/ì¸ì²œ</span>
					<span class="tag" data-iata="CJU" data-kolocation="ì œì£¼">ì œì£¼</span> <span
						class="tag" data-iata="PUS" data-kolocation="ë¶€ì‚°">ë¶€ì‚°</span> <span
						class="tag" data-iata="GMP" data-kolocation="ì„œìš¸/ê¹€í¬">ì„œìš¸/ê¹€í¬</span> <span
						class="tag" data-iata="RSU" data-kolocation="ì—¬ìˆ˜">ì—¬ìˆ˜</span>
				</div>
				<h3>ë™ë‚¨ì•„ ì¸ê¸° ê²€ìƒ‰</h3>
				<div class="tags-container">
					<span class="tag" data-iata="DAD" data-kolocation="ë‹¤ë‚­">ë‹¤ë‚­</span> <span
						class="tag" data-iata="BKK" data-kolocation="ë°©ì½•">ë°©ì½•</span> <span
						class="tag" data-iata="TPE" data-kolocation="íƒ€ì´ë² ì´">íƒ€ì´ë² ì´</span> <span
						class="tag" data-iata="HKG" data-kolocation="í™ì½©">í™ì½©</span> <span
						class="tag" data-iata="DPS" data-kolocation="ë°œë¦¬">ë°œë¦¬</span>
				</div>
				<h3>ì¼ë³¸ ì¸ê¸° ê²€ìƒ‰</h3>
				<div class="tags-container">
					<span class="tag" data-iata="NRT" data-kolocation="ë„ì¿„/ë‚˜ë¦¬íƒ€">ë„ì¿„/ë‚˜ë¦¬íƒ€</span>
					<span class="tag" data-iata="KIX" data-kolocation="ì˜¤ì‚¬ì¹´">ì˜¤ì‚¬ì¹´</span>
					<span class="tag" data-iata="FUK" data-kolocation="í›„ì¿ ì˜¤ì¹´">í›„ì¿ ì˜¤ì¹´</span>
					<span class="tag" data-iata="CTS" data-kolocation="ì‚¿í¬ë¡œ/ì‚°ì¹˜í† ì„¸">ì‚¿í¬ë¡œ/ì‚°ì¹˜í† ì„¸</span>
					<span class="tag" data-iata="OKA" data-kolocation="ì˜¤í‚¤ë‚˜ì™€">ì˜¤í‚¤ë‚˜ì™€</span>
				</div>
				<h3>ìœ ëŸ½ ì¸ê¸° ê²€ìƒ‰</h3>
				<div class="tags-container">
					<span class="tag" data-iata="CDG" data-kolocation="íŒŒë¦¬">íŒŒë¦¬</span> <span
						class="tag" data-iata="LHR" data-kolocation="ëŸ°ë˜">ëŸ°ë˜</span> <span
						class="tag" data-iata="FCO" data-kolocation="ë¡œë§ˆ">ë¡œë§ˆ</span> <span
						class="tag" data-iata="MAD" data-kolocation="ë§ˆë“œë¦¬ë“œ">ë§ˆë“œë¦¬ë“œ</span> <span
						class="tag" data-iata="BCN" data-kolocation="ë°”ë¥´ì…€ë¡œë‚˜">ë°”ë¥´ì…€ë¡œë‚˜</span>
				</div>
				<h3>ë¶ë¯¸ ë° ê¸°íƒ€</h3>
				<div class="tags-container">
					<span class="tag" data-iata="JFK" data-kolocation="ë‰´ìš•">ë‰´ìš•</span> <span
						class="tag" data-iata="SYD" data-kolocation="ì‹œë“œë‹ˆ">ì‹œë“œë‹ˆ</span> <span
						class="tag" data-iata="LAX" data-kolocation="ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤">ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤</span>
					<span class="tag" data-iata="SFO" data-kolocation="ìƒŒí”„ë€ì‹œìŠ¤ì½”">ìƒŒí”„ë€ì‹œìŠ¤ì½”</span>
					<span class="tag" data-iata="GUM" data-kolocation="ê´Œ">ê´Œ</span>
				</div>
			</div>
		</div>
	</div>

	<div id="passengerModal" class="modal-overlay">
		<div class="modal-content">
			<div class="modal-header">
				<h2>ì¸ì› ë° ì¢Œì„ ë“±ê¸‰</h2>
				<button class="close-button">&times;</button>
			</div>

			<div class="passenger-section">
				<h4>ì¸ì›</h4>
				<div class="passenger-row" data-type="adult">
					<div class="passenger-label">
						<div>ì„±ì¸</div>
						<small>ë§Œ 12ì„¸ ì´ìƒ</small>
					</div>
					<div class="passenger-controls">
						<button type="button" class="control-btn minus" disabled>-</button>
						<span class="count">1</span>
						<button type="button" class="control-btn plus">+</button>
					</div>
				</div>
				<div class="passenger-row" data-type="child">
					<div class="passenger-label">
						<div>ì†Œì•„</div>
						<small>ë§Œ 2~12ì„¸ ë¯¸ë§Œ</small>
					</div>
					<div class="passenger-controls">
						<button type="button" class="control-btn minus" disabled>-</button>
						<span class="count">0</span>
						<button type="button" class="control-btn plus">+</button>
					</div>
				</div>
				<div class="passenger-row" data-type="infant">
					<div class="passenger-label">
						<div>ìœ ì•„</div>
						<small>ë§Œ 2ì„¸ ë¯¸ë§Œ (ë³´í˜¸ìì™€ ë™ë°˜ ì°©ì„)</small>
					</div>
					<div class="passenger-controls">
						<button type="button" class="control-btn minus" disabled>-</button>
						<span class="count">0</span>
						<button type="button" class="control-btn plus">+</button>
					</div>
				</div>
			</div>

			<div class="seat-class-section">
				<h4>ì¢Œì„ë“±ê¸‰</h4>
				<div class="seat-class-options">
					<label><input type="radio" name="travelClassModal"
						value="ECONOMY" checked> ì¼ë°˜ì„</label> <label><input
						type="radio" name="travelClassModal" value="BUSINESS">
						ë¹„ì¦ˆë‹ˆìŠ¤ì„</label>
				</div>
			</div>

			<button type="button" id="confirmPassengerBtn" class="confirm-btn">ì„ íƒ
				ì™„ë£Œ</button>
		</div>
	</div>

	<div id="alertModal" class="modal-overlay">
		<div class="modal-content">
			<p id="alertModalMessage">ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
			<button id="closeAlertModalBtn">ë‹«ê¸°</button>
		</div>
	</div>

	<div id="loadingModal">
		<div class="spinner"></div>
		<p>ìµœì €ê°€ í•­ê³µê¶Œì„ ê²€ìƒ‰ì¤‘ì…ë‹ˆë‹¤...</p>
	</div>

	<div id="destinationModal" class="modal-overlay">
		<div class="modal-content modal-large">
			<div class="modal-header">
				<h2 id="destModalTitle">ì—¬í–‰ì§€ ì´ë¦„</h2>
				<button class="close-button" onclick="closeDestinationModal()">&times;</button>
			</div>
			<div class="modal-body">
				<p id="destModalDesc" class="dest-desc">ì—¬í–‰ì§€ ì„¤ëª…ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>

				<h3 class="rec-title">âœ¨ ì¶”ì²œ ì¦ê¸¸ê±°ë¦¬</h3>
				<div id="activityGrid" class="activity-grid"></div>
				<div
					style="margin-top: 30px; text-align: center; padding-bottom: 10px;">
					<button type="button" id="btnBookFlight" class="submit-button"
						style="width: 100%; background-color: #ff7675; color: white; border: none; cursor: pointer;">
						âœˆï¸ í•­ê³µê¶Œ ê²€ìƒ‰í•˜ëŸ¬ ê°€ê¸°</button>
				</div>
			</div>
		</div>
	</div>


		<script
			src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
		<script src="https://npmcdn.com/flatpickr/dist/l10n/ko.js"></script>


		<script>	
	// --- ìš”ì†Œ ì„ íƒ ---
	const departureBtn = document.getElementById('departureBtn');
	const arrivalBtn = document.getElementById('arrivalBtn');
	const departureCodeInput = document.getElementById('departureCode');
	const arrivalCodeInput = document.getElementById('arrivalCode');
	const departureKoLocationInput = document.getElementById('departureKoLocation');
	const arrivalKoLocationInput = document.getElementById('arrivalKoLocation');
	const locationModal = document.getElementById('locationModal');
	const modalContentDiv = locationModal.querySelector('.modal-content');
	const popularSearchesContainer = modalContentDiv.querySelector('.popular-searches');
	const defaultModalContentHtml = popularSearchesContainer.innerHTML;

	let activeSelection = null;

	// --- í•¨ìˆ˜ ì •ì˜: ìœ„ì¹˜ ëª¨ë‹¬ ê´€ë ¨ ---

	function openDepartureModal() {
	    activeSelection = 'departure';
	    resetModalToDefault('ì¶œë°œì§€ ì„ íƒ');
	    locationModal.style.display = 'flex';
	    modalContentDiv.querySelector('#searchAir').focus();
	}

	function openArrivalModal() {
	    activeSelection = 'arrival';
	    resetModalToDefault('ë„ì°©ì§€ ì„ íƒ');
	    locationModal.style.display = 'flex';
	    modalContentDiv.querySelector('#searchAir').focus();
	}

	function resetModalToDefault(title) {
	    modalContentDiv.querySelector('#modalTitle').textContent = title;
	    popularSearchesContainer.innerHTML = defaultModalContentHtml;
	    modalContentDiv.querySelector('#searchAir').value = "";

	    const tags = popularSearchesContainer.querySelectorAll('.tag');
	    for (const tag of tags) {
	        tag.addEventListener('click', handleTagClick);
	    }
	}

	function closeModal() {
	    locationModal.style.display = 'none';
	}

	function renderSearchResults(airList) {
	    let airListHtml = '';
	    if (airList && airList.length > 0) {
	        for (const air of airList) {
	            airListHtml += `
	                <div class="search-result-item" data-kolocation="${air.kolocation}" data-iata="${air.iataCode}">
	                    <div class="location-main">${air.kolocation} (${air.iataCode})</div>
	                    <div class="location-sub">${air.enlocation}</div>
	                </div>`;
	        }
	    } else {
	        airListHtml = '<div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
	    }
	    popularSearchesContainer.innerHTML = airListHtml;
	}

	function selectLocation(kolocation, iataCode) {
	    const displayText = `${kolocation} ${iataCode}`;

	    if (activeSelection === 'departure') {
	        departureBtn.textContent = displayText;
	        departureCodeInput.value = iataCode;
	        departureKoLocationInput.value = kolocation;
	    } else if (activeSelection === 'arrival') {
	        arrivalBtn.textContent = displayText;
	        arrivalCodeInput.value = iataCode;
	        arrivalKoLocationInput.value = kolocation;
	        arrivalBtn.classList.remove('field-placeholder');
	        arrivalBtn.classList.add('field-location');
	    }
	    closeModal();
	}
	
	function handleTagClick(event) {
	    const clickedTag = event.currentTarget;
	    const kolocation = clickedTag.dataset.kolocation || clickedTag.textContent;
	    const iataCode = clickedTag.dataset.iata;
	    selectLocation(kolocation, iataCode);
	}

	// --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ: ìœ„ì¹˜ ëª¨ë‹¬ ê´€ë ¨ ---

	departureBtn.addEventListener('click', openDepartureModal);
	arrivalBtn.addEventListener('click', openArrivalModal);

	locationModal.addEventListener('click', function(event) {
	    const target = event.target;

	    if (target.id === 'closeModalBtn' || target.classList.contains('close-button') || target === locationModal) {
	        closeModal(); 
	        return;
	    }
	    
	    const resultItem = target.closest('.search-result-item');
	    if (resultItem) {
	        const kolocation = resultItem.dataset.kolocation;
	        const iataCode = resultItem.dataset.iata;
	        selectLocation(kolocation, iataCode);
	    }
	});

	locationModal.addEventListener('keydown', function(event) {
	    if (event.target.id === 'searchAir' && event.key === 'Enter') {
	        event.preventDefault();
	        $.ajax({
	            url: "/air/searchAir", type: "get", dataType: "json",
	            data: { "text": event.target.value },
	            success: function(res) {
	                renderSearchResults(res);
            }
	        });
	    }
	});

	const initialTags = document.querySelectorAll('.tag');
	for (const tag of initialTags) {
	    tag.addEventListener('click', handleTagClick);
	}
	
	const swapBtn = document.querySelector('.swap-button');
    swapBtn.addEventListener('click', function() {
        const departureText = departureBtn.textContent;
        const departureCode = departureCodeInput.value;
        const departureKo = departureKoLocationInput.value;
        
        const arrivalText = arrivalBtn.textContent;
        const arrivalCode = arrivalCodeInput.value;
        const arrivalKo = arrivalKoLocationInput.value;
        
        departureBtn.textContent = arrivalText;
        departureCodeInput.value = arrivalCode;
        departureKoLocationInput.value = arrivalKo;

        arrivalBtn.textContent = departureText;
        arrivalCodeInput.value = departureCode;
        arrivalKoLocationInput.value = departureKo;
        
        const departureHasLocation = departureBtn.classList.contains('field-location');
        const arrivalHasLocation = arrivalBtn.classList.contains('field-location');

        if (arrivalHasLocation) {
            departureBtn.classList.add('field-location');
            departureBtn.classList.remove('field-placeholder');
        } else {
            departureBtn.classList.add('field-placeholder');
            departureBtn.classList.remove('field-location');
        }

        if (departureHasLocation) {
            arrivalBtn.classList.add('field-location');
            arrivalBtn.classList.remove('field-placeholder');
        } else {
            arrivalBtn.classList.add('field-placeholder');
            arrivalBtn.classList.remove('field-location');
        }
    });
	
	// --- ë‚ ì§œ ì„ íƒ (flatpickr) ê´€ë ¨ ---
	const dateRangeBtn = document.getElementById('dateRangeBtn');
	const departureDateInput = document.getElementById('departureDateInput');
	const returnDateInput = document.getElementById('returnDateInput');
    const oneWayRadio = document.getElementById('one-way');
    const roundTripRadio = document.getElementById('round-trip');
	
	dateRangeBtn.addEventListener('click', (event) => event.preventDefault());
	
	function formatDate(date) {
		const year = date.getFullYear();
		const month = String(date.getMonth() + 1).padStart(2, '0');
		const day = String(date.getDate()).padStart(2, '0');
		return `${year}-${month}-${day}`;
	}

	function formatDisplayDate(date) {
		const month = date.getMonth() + 1;
		const day = date.getDate();
		const week = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
		const dayOfWeek = week[date.getDay()];
		return `${month}.${day}(${dayOfWeek})`;
	}

    function resetDateSelection() {
        dateRangeBtn.textContent = 'ì–¸ì œ ë– ë‚˜ì‹œë‚˜ìš”?';
        dateRangeBtn.classList.add('field-placeholder');
        dateRangeBtn.classList.remove('field-location');
        departureDateInput.value = '';
        returnDateInput.value = '';
        datePicker.clear();
    }

	const datePicker = flatpickr(dateRangeBtn, {
		mode: 'range',
		dateFormat: "Y-m-d",
		locale: "ko",
		minDate: "today",
		onClose: function(selectedDates) {
            const isOneWay = oneWayRadio.checked;
            if (isOneWay && selectedDates.length >= 1) {
                const selectedDate = selectedDates[0];
                departureDateInput.value = formatDate(selectedDate);
                returnDateInput.value = '';
                dateRangeBtn.textContent = formatDisplayDate(selectedDate);
                dateRangeBtn.classList.remove('field-placeholder');
	            dateRangeBtn.classList.add('field-location');
            } else if (!isOneWay && selectedDates.length === 2) {
				const startDate = selectedDates[0];
				const endDate = selectedDates[1];
				departureDateInput.value = formatDate(startDate);
				returnDateInput.value = formatDate(endDate);
				dateRangeBtn.textContent = `${formatDisplayDate(startDate)} ~ ${formatDisplayDate(endDate)}`;
                dateRangeBtn.classList.remove('field-placeholder');
	            dateRangeBtn.classList.add('field-location');
			}
		}
	});

    oneWayRadio.addEventListener('change', function() {
        if (this.checked) {
            datePicker.set('mode', 'single');
            resetDateSelection();
        }
    });

    roundTripRadio.addEventListener('change', function() {
        if (this.checked) {
            datePicker.set('mode', 'range');
            resetDateSelection();
        }
    });
    
    // --- íƒ‘ìŠ¹ê° ëª¨ë‹¬ ê´€ë ¨ ---
    const passengerBtn = document.getElementById('passengerBtn');
    const passengerModal = document.getElementById('passengerModal');
    const passengerModalContent = passengerModal.querySelector('.modal-content');
    const confirmPassengerBtn = document.getElementById('confirmPassengerBtn');
    const adultsInput = document.getElementById('adultsInput');
    const childrenInput = document.getElementById('childrenInput');
    const infantsInput = document.getElementById('infantsInput');
    const travelClassInput = document.getElementById('travelClassInput');

    function openPassengerModal() {
        passengerModal.style.display = 'flex';
    }

    function closePassengerModal() {
        passengerModal.style.display = 'none';
    }

    function updateButtonStates() {
        const adults = parseInt(passengerModal.querySelector('.passenger-row[data-type="adult"] .count').textContent);
        const children = parseInt(passengerModal.querySelector('.passenger-row[data-type="child"] .count').textContent);
        const infants = parseInt(passengerModal.querySelector('.passenger-row[data-type="infant"] .count').textContent);
        const totalAllPassengers = adults + children + infants;
        
        const adultControls = passengerModal.querySelector('.passenger-row[data-type="adult"]');
        const childControls = passengerModal.querySelector('.passenger-row[data-type="child"]');
        const infantControls = passengerModal.querySelector('.passenger-row[data-type="infant"]');
        
        const isTotalMaxed = (totalAllPassengers >= 9);
      
        adultControls.querySelector('.plus').disabled = isTotalMaxed;
        adultControls.querySelector('.minus').disabled = (adults <= 1 || adults <= infants);
        childControls.querySelector('.plus').disabled = isTotalMaxed;
        childControls.querySelector('.minus').disabled = (children <= 0);
        infantControls.querySelector('.plus').disabled = isTotalMaxed || (infants >= adults);
        infantControls.querySelector('.minus').disabled = (infants <= 0);
    }

    passengerBtn.addEventListener('click', openPassengerModal);

    passengerModal.addEventListener('click', (event) => {
        if (event.target === passengerModal || event.target.classList.contains('close-button')) {
            closePassengerModal();
        }
    });
  
    passengerModalContent.addEventListener('click', (event) => {
        const button = event.target;
        if (!button.classList.contains('control-btn') || button.disabled) return;

        const row = button.closest('.passenger-row');
        const countSpan = row.querySelector('.count');
        let currentCount = parseInt(countSpan.textContent);

        if (button.classList.contains('plus')) {
            countSpan.textContent = currentCount + 1;
        } else if (button.classList.contains('minus')) {
            countSpan.textContent = currentCount - 1;
        }
        updateButtonStates();
    });

    confirmPassengerBtn.addEventListener('click', () => {
        const adults = parseInt(passengerModal.querySelector('.passenger-row[data-type="adult"] .count').textContent);
        const children = parseInt(passengerModal.querySelector('.passenger-row[data-type="child"] .count').textContent);
        const infants = parseInt(passengerModal.querySelector('.passenger-row[data-type="infant"] .count').textContent);
        const selectedClassRadio = passengerModal.querySelector('input[name="travelClassModal"]:checked');
        const travelClassValue = selectedClassRadio.value;
        const travelClassName = selectedClassRadio.parentElement.textContent.trim();
        const totalPassengers = adults + children + infants;

        adultsInput.value = adults;
        childrenInput.value = children;
        infantsInput.value = infants;
        travelClassInput.value = travelClassValue;

        passengerBtn.textContent = `ğŸ‘¤ íƒ‘ìŠ¹ê° ${totalPassengers}ëª…, ${travelClassName}`;
        passengerBtn.classList.remove('field-placeholder');
        passengerBtn.classList.add('field-location');
        closePassengerModal();
    });

    updateButtonStates();

    // --- ì§í•­ ì²´í¬ë°•ìŠ¤ ê´€ë ¨ ---
    const directFlightCheckbox = document.getElementById('direct-flight-checkbox');
    const directFlightInput = document.getElementById('directFlightInput');

    directFlightCheckbox.addEventListener('change', function() {
        directFlightInput.value = this.checked ? 'true' : 'false';
    });
    
    // --- í¼ ì œì¶œ ìœ íš¨ì„± ê²€ì‚¬ ë° ë¡œë”© ëª¨ë‹¬ ---
    const searchForm = document.querySelector('.search-widget-container');
    const arrivalCodeInputForValidation = document.getElementById('arrivalCode');
    const departureDateInputForValidation = document.getElementById('departureDateInput');
    const alertModal = document.getElementById('alertModal');
    const alertModalMessage = document.getElementById('alertModalMessage');
    const closeAlertModalBtn = document.getElementById('closeAlertModalBtn');
    const loadingModal = document.getElementById('loadingModal');

    function showAlertModal(message) {
        alertModalMessage.innerHTML = message.replace(/\n/g, '<br>');
        alertModal.style.display = 'flex';
    }

    searchForm.addEventListener('submit', function(event) {
        event.preventDefault();

        if (arrivalCodeInputForValidation.value === '') {
            showAlertModal('ë„ì°©ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }
        if (departureDateInputForValidation.value === '') {
            showAlertModal('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }
        
        loadingModal.style.display = 'flex';
        setTimeout(() => { this.submit(); }, 100);
    });

    closeAlertModalBtn.addEventListener('click', function() {
        alertModal.style.display = 'none';
    });

    // ==========================================
    // [NEW] ì—¬í–‰ì§€ ì¶”ì²œ ëª¨ë‹¬ (AJAX ì—°ë™ ë²„ì „)
    // ==========================================

    const destModal = document.getElementById('destinationModal');
    const destModalTitle = document.getElementById('destModalTitle');
    const destModalDesc = document.getElementById('destModalDesc');
    const activityGrid = document.getElementById('activityGrid');

    // ì—¬í–‰ì§€ ì¹´ë“œ í´ë¦­ ì‹œ AJAX í˜¸ì¶œ
    // (ì£¼ì˜: ë™ì ìœ¼ë¡œ ìƒì„±ëœ ìš”ì†Œê°€ ì•„ë‹ˆë¯€ë¡œ ë°”ë¡œ ì´ë²¤íŠ¸ ê±¸ì–´ë„ ë©ë‹ˆë‹¤. 
    //  ë§Œì•½ ë™ì  ìƒì„±ì´ë¼ë©´ ìœ„ì„(delegation) ë°©ì‹ì„ ì¨ì•¼ í•©ë‹ˆë‹¤.)
    const destCards = document.querySelectorAll('.destination-card');
    destCards.forEach(card => {
        card.addEventListener('click', function() {
            const city = this.getAttribute('data-city'); 
            if(city) {
                openDestinationModal(city);
            }
        });
    });

    function openDestinationModal(city) {
        // AJAX í˜¸ì¶œ
        $.ajax({
            url: '/api/destination/detail',
            type: 'GET',
            data: { cityName: city },
            dataType: 'json',
            success: function(data) {
                // 1. ëª¨ë‹¬ í…ìŠ¤íŠ¸ ì±„ìš°ê¸°
                destModalTitle.textContent = city;
                destModalDesc.textContent = data.desc;
                
                // 2. ì•¡í‹°ë¹„í‹° ê·¸ë¦¬ë“œ ìƒì„±
                let html = '';
                if (data.activities && data.activities.length > 0) {
                    data.activities.forEach(item => {
                        html += `
                            <div class="activity-item">
                                <img src="${item.img}" class="activity-img" alt="${item.title}">
                                <div class="activity-info">
                                    <h5>${item.title}</h5>
                                    <p>${item.text}</p>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    html = '<p style="grid-column: 1 / -1; text-align: center;">ë“±ë¡ëœ ì¶”ì²œ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                }
                activityGrid.innerHTML = html;

                // ====================================================
                // 3. [ì¶”ê°€] í•­ê³µê¶Œ ê²€ìƒ‰ ë²„íŠ¼ ë¡œì§ ì—°ê²°
                // ====================================================
                const bookBtn = document.getElementById('btnBookFlight');
                
                // ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ í•´ë‹¹ ë„ì‹œ ì´ë¦„ìœ¼ë¡œ ë³€ê²½ (ì˜ˆ: âœˆï¸ ì œì£¼ í•­ê³µê¶Œ ê²€ìƒ‰í•˜ëŸ¬ ê°€ê¸°)
                bookBtn.textContent = `âœˆï¸ ${city} í•­ê³µê¶Œ ê²€ìƒ‰í•˜ëŸ¬ ê°€ê¸°`;

                // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
               bookBtn.onclick = function() {
                // (1) ë„ì°©ì§€ UI ë° ê°’ ë³€ê²½
                const arrivalBtn = document.getElementById('arrivalBtn');
                const arrivalKoInput = document.getElementById('arrivalKoLocation');
                
                arrivalBtn.textContent = city; 
                arrivalBtn.classList.remove('field-placeholder');
                arrivalBtn.classList.add('field-location');
                arrivalKoInput.value = city; 

                // (2) ëª¨ë‹¬ ë‹«ê¸°
                closeDestinationModal();

                // (3) [NEW] í™”ë©´ ìŠ¤í¬ë¡¤ ì´ë™ (ê²€ìƒ‰ì°½ ìœ„ì¹˜ë¡œ ë¶€ë“œëŸ½ê²Œ)
                // .hero-section(ë°°ê²½ ì´ë¯¸ì§€ ìˆëŠ” ì„¹ì…˜)ì„ ê¸°ì¤€ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
                document.querySelector('.hero-section').scrollIntoView({ 
                    behavior: 'smooth',  // ë¶€ë“œëŸ½ê²Œ ì´ë™
                    block: 'center'      // ê²€ìƒ‰ì°½ì´ í™”ë©´ ì¤‘ì•™ì— ì˜¤ë„ë¡
                });

                // (4) ë‚ ì§œ ì„ íƒì°½ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
                // ìŠ¤í¬ë¡¤ ì´ë™ ì‹œê°„ì„ ê³ ë ¤í•´ì„œ ë”œë ˆì´ë¥¼ ì¡°ê¸ˆ(0.5ì´ˆ) ì¤ë‹ˆë‹¤.
                setTimeout(() => {
                    datePicker.open(); 
                }, 500); 
            };

                // 4. ëª¨ë‹¬ ë³´ì—¬ì£¼ê¸°
                destModal.style.display = 'flex';
            },
            error: function(err) {
                console.error(err);
                alert('ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        });
    }

    function closeDestinationModal() {
        destModal.style.display = 'none';
    }

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    destModal.addEventListener('click', function(event) {
        if (event.target === destModal) {
            closeDestinationModal();
        }
    });
	</script>
</body>
</html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>GyuA 여행 예약 내역</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<style>
body {
	margin: 0;
	padding: 0;
}
/* --- 헤더 (GNB) 스타일 --- */
.moana_gnb {
	background-color: #5ac4c9; /* 헤더 전체 배경색 */
	color: #fff; /* 헤더 기본 글자색 */
	padding: 10px 0; /* 헤더 상하 패딩 */
	width: 100%; /* 헤더 너비 */
}

.gnb_container {
	max-width: 1200px; /* 콘텐츠 최대 너비 제한 */
	margin: 0 auto; /* 중앙 정렬 */
	display: flex; /* 자식 요소들을 가로로 배치 */
	align-items: center; /* 세로 중앙 정렬 */
	justify-content: space-between; /* 요소들 사이에 균일한 간격 배분 */
	padding: 0 20px; /* 좌우 패딩 */
	box-sizing: border-box; /* 패딩과 테두리를 너비에 포함 */
}

.box__inner {
	display: flex;
	align-items: center;
	gap: 20px; /* 자식 요소 간 간격 */
}

.moana_gnb h1 {
	margin: 0; /* h1 태그 기본 마진 제거 */
}

.moana_gnb h1 img {
	height: 32px; /* 로고 이미지 높이 */
	vertical-align: middle; /* 이미지 세로 정렬 */
}

/* 상단 메뉴 (항공, 추천챗 등) 스타일 */
.list__tab {
	list-style: none; /* 리스트 점 제거 */
	margin: 0;
	padding: 0;
	display: flex; /* 메뉴 아이템들을 가로로 정렬 */
	gap: 20px; /* 메뉴 아이템 간 간격 */
}

.list__tab .list-item a {
	color: #fff; /* 메뉴 글자색 흰색 */
	text-decoration: none; /* 밑줄 제거 */
	font-weight: bold; /* 글자 굵게 */
	padding: 5px 0;
	position: relative; /* 밑줄 위치의 기준점 */
	transition: color 0.3s ease; /* 색상 변경 시 부드러운 효과 */
}

/* 메뉴에 마우스를 올리거나 활성화되었을 때 스타일 */
.list__tab .list-item a:hover, .list__tab .list-item a.link__tab--active
	{
	color: #eee; /* 호버 또는 활성화 시 글자색 변경 */
}

/* 활성화된 메뉴 하단 밑줄 스타일 */
.list__tab .list-item a.link__tab--active::after {
	content: '';
	position: absolute;
	left: 0;
	bottom: -5px; /* 밑줄 위치 조정 */
	width: 100%;
	height: 2px;
	background-color: #fff; /* 활성화 메뉴 밑줄 색상 */
}

/* 우측 링크(나의 예약내역, 로그인 등) 컨테이너 */
.link-container {
	display: flex;
	align-items: center;
	gap: 10px; /* 링크 간 간격 */
}

/* 우측 링크(나의 예약내역, 로그인 등) 개별 스타일 */
.link__booking-history {
	border: 1px solid #fff; /* 흰색 테두리 */
	color: #fff;
	padding: 8px 15px; /* 내부 여백 */
	border-radius: 20px; /* 둥근 테두리 */
	text-decoration: none;
	font-size: 14px;
	white-space: nowrap; /* 줄바꿈 방지 */
}

.main-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 40px 20px;
}

/* 페이지 제목 */
.page-title {
	font-size: 28px;
	font-weight: 800;
	margin-bottom: 30px;
	color: #333;
}

/* 예약 카드 전체 스타일 */
.booking-card {
	background-color: #fff;
	border-radius: 12px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
	margin-bottom: 24px;
	overflow: hidden; /* 내부 요소가 카드를 벗어나지 않도록 */
	transition: box-shadow 0.2s ease-in-out;
}

.booking-card:hover {
	box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
}

/* 카드 헤더 (예약일, 상태) */
.card-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 16px 24px;
	background-color: #f8f9fa;
	border-bottom: 1px solid #e9ecef;
	font-size: 14px;
}

/* [ ⭐️ 신규 추가 ⭐️ ] 헤더 좌측 (날짜 + 뱃지) */
.header-left {
    display: flex;
    align-items: center;
    gap: 12px; /* 날짜와 뱃지 사이 간격 */
}

.booking-date {
	color: #666;
}

/* [ ⭐️ 신규 추가 ⭐️ ] 편도/왕복 뱃지 */
.trip-type-badge {
    padding: 3px 10px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: bold;
    border: 1px solid;
}

.trip-type-badge.oneway { /* 편도 뱃지 */
    background-color: #f0f5ff; /* 연한 파랑 */
    color: #2f54eb;
    border-color: #adc6ff;
}

.trip-type-badge.roundtrip { /* 왕복 뱃지 */
    background-color: #f6ffed; /* 연한 초록 */
    color: #52c41a;
    border-color: #b7eb8f;
}

/* 예약 상태 배지 */
.status-badge {
	padding: 4px 10px;
	border-radius: 12px;
	font-weight: bold;
	font-size: 13px;
}

.status-confirmed { /* 예약 확정 */
	background-color: #e6f7ff;
	color: #1890ff;
}

.status-cancelled { /* 예약 취소 */
	background-color: #fff1f0;
	color: #ff4d4f;
}

/* 카드 바디 (여정 정보) */
.card-body {
	padding: 24px;
}

.segment-divider {
	border: 0;
	height: 1px;
	background-color: #e9ecef;
	margin: 20px 0;
}

/* 각 여정(가는편/오는편) 스타일 */
.flight-segment {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 20px;
}

.segment-airline, .segment-schedule {
	display: flex;
	align-items: center;
	gap: 8px;
	color: #555;
	min-width: 220px; /* 너비 고정으로 레이아웃 안정성 확보 */
}

.segment-airline i, .segment-schedule i {
	color: #5ac4c9; /* 아이콘 색상 */
	font-size: 1.2em;
}

.segment-airline i.return-flight {
	transform: scaleX(-1); /* 오는 편 비행기 아이콘 좌우반전 */
}

.segment-route {
	flex-grow: 1; /* 남는 공간을 모두 차지 */
	text-align: center;
	font-size: 18px;
	font-weight: bold;
}

.segment-route small {
	font-size: 14px;
	color: #888;
	font-weight: normal;
	margin: 0 2px;
}

.segment-route .arrow {
	color: #5ac4c9;
	margin: 0 16px;
}

/* 카드 푸터 (가격, 버튼) */
.card-footer {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 16px 24px;
	background-color: #f8f9fa;
	border-top: 1px solid #e9ecef;
}

.total-price {
	display: flex;
	flex-direction: column;
}

.total-price span {
	font-size: 13px;
	color: #666;
}

.total-price strong {
	font-size: 22px;
	font-weight: 800;
	color: #d91f29;
}

/* 예약 취소 버튼 */
.btn-cancel {
	background-color: transparent;
	border: 1px solid #ff4d4f;
	color: #ff4d4f;
	padding: 8px 16px;
	border-radius: 6px;
	font-weight: bold;
	cursor: pointer;
	transition: all 0.2s ease;
}

.btn-cancel:hover {
	background-color: #ff4d4f;
	color: #fff;
}

/* 예약 내역이 없을 때 메시지 */
.no-booking-message {
	text-align: center;
	padding: 80px 20px;
	background-color: #fff;
	border-radius: 12px;
}

.no-booking-message p {
	font-size: 18px;
	color: #555;
	margin-bottom: 24px;
}

.btn-home {
	background-color: #5ac4c9;
	color: #fff;
	padding: 12px 24px;
	text-decoration: none;
	font-weight: bold;
	border-radius: 8px;
	transition: background-color 0.2s ease;
}

.btn-home:hover {
	background-color: #4aa0a5;
}
</style>
</head>
<body>
	<header class="moana_gnb" role="banner">
		<div class="gnb_container">
			<div class="box__inner">
				<h1>
					<a href="/"> <img
						src="//pics.gmarket.co.kr/pc/single/kr/vertical/common/logo_g-travel.png"
						alt="G마켓 여행" />
					</a>
				</h1>
			</div>
			<ul class="list__tab">
				<li class="list-item"><a class="link__tab" href="/">항공</a></li>
				<li class="list-item"><a class="link__tab" href="/chat">추천챗</a>
				</li>
			</ul>
			<div class="link-container">
				<a th:if="${session.loginUser == null}"
					class="link__booking-history sp_sd--after" href="/member/login">로그인</a>
				<a th:if="${session.loginUser != null}"
					th:text="${session.loginUser.UserName}"
					class="link__booking-history sp_sd--after">허성무</a> <a
					th:if="${session.loginUser != null}"
					class="link__booking-history sp_sd--after" href="/member/logout">로그아웃</a>
			</div>
		</div>
	</header>

	<main class="main-container">
		<h2 class="page-title">나의 예약 내역</h2>

		<div th:if="${#lists.isEmpty(bookingList)}" class="no-booking-message">
			<p>아직 예약 내역이 없습니다.</p>
			<a href="/" class="btn-home">항공권 검색하러 가기</a>
		</div>

		<div th:unless="${#lists.isEmpty(bookingList)}"
			th:each="booking : ${bookingList}" class="booking-card">
			<div class="card-header">
				
				<div class="header-left">
					<span class="booking-date"
						th:text="'예약일: ' + ${#temporals.format(booking.createdAt, 'yyyy-MM-dd')}">예약일: 2025-10-18</span>
					
					<span th:if="${booking.returnAirline == null}" 
						  class="trip-type-badge oneway">편도</span>
					<span th:if="${booking.returnAirline != null}" 
						  class="trip-type-badge roundtrip">왕복</span>
				</div>
				<span class="status-badge"
					th:text="${booking.bookingStatus == 'CONFIRMED' ? '예약 확정' : '예약 취소'}"
					th:classappend="${booking.bookingStatus == 'CONFIRMED' ? 'status-confirmed' : 'status-cancelled'}">
					예약 확정 </span>
			</div>

			<div class="card-body">
				<div class="flight-segment">
					<div class="segment-airline">
						<i class="bi bi-airplane-fill"></i> <span
							th:text="${booking.departureAirline} + ' 항공'">7C 항공</span>
					</div>
					<div class="segment-route">
						<strong><span th:text="${booking.departureOriginCode}">ICN</span></strong>
						<small th:text="'(' + ${booking.departureKoLocation} + ')'">(서울/인천)</small>
						<span class="arrow">→</span> <strong><span
							th:text="${booking.departureDestinationCode}">KIX</span></strong> <small
							th:text="'(' + ${booking.arrivalKoLocation} + ')'">(오사카)</small>
					</div>
					<div class="segment-schedule">
						<i class="bi bi-clock"></i> <span
							th:text="${#temporals.format(booking.departureTime, 'yyyy-MM-dd HH:mm')} + ' ~ ' + ${#temporals.format(booking.departureArrivalTime, 'HH:mm')}">2025-10-22
							17:00 ~ 18:50</span>
					</div>
				</div>

				<th:block th:if="${booking.returnAirline != null}">
					<hr class="segment-divider" />

					<div class="flight-segment">
						<div class="segment-airline">
							<i class="bi bi-airplane-fill return-flight"></i> <span
								th:text="${booking.returnAirline} + ' 항공'">7C 항공</span>
						</div>
						<div class="segment-route">
							<strong><span th:text="${booking.returnOriginCode}">KIX</span></strong>
							<small th:text="'(' + ${booking.arrivalKoLocation} + ')'">(오사카)</small>
							<span class="arrow">→</span> <strong><span
								th:text="${booking.returnDestinationCode}">ICN</span></strong> <small
								th:text="'(' + ${booking.departureKoLocation} + ')'">(서울/인천)</small>
						</div>
						<div class="segment-schedule">
							<i class="bi bi-clock"></i> <span
								th:text="${#temporals.format(booking.returnTime, 'yyyy-MM-dd HH:mm')} + ' ~ ' + ${#temporals.format(booking.returnArrivalTime, 'HH:mm')}">2025-10-30
								11:50 ~ 13:50</span>
						</div>
					</div>
				</th:block>
			</div>

			<div class="card-footer">
				<div class="total-price">
					<span>총 결제 금액</span> <strong
						th:text="${#numbers.formatInteger(booking.totalPrice, 0, 'COMMA')} + '원'">183,579원</strong>
				</div>
				<div class="action-buttons">
					<button class="btn-cancel"
						th:if="${booking.bookingStatus == 'CONFIRMED'}">예약 취소</button>
				</div>
			</div>
		</div>
	</main>
</body>
</html>